<!-- Left Sidebar -->
<div id="sidebar" class="sidebar collapsed">
    <div class="sidebar-header">
        <h3>Options</h3>
        <button
            class="sidebar-toggle open-toggle"
            _="on click add .collapsed to #sidebar then add .sidebar-collapsed to .main-content"
        >
            <i class="fas fa-bars"></i>
        </button>
    </div>
    <div class="sidebar-content">
        <div class="filter-section">
            <label for="name-filter">Name</label>
            <input
                type="text"
                id="name-filter"
                name="name"
                placeholder="Filter by name..."
                hx-get="/component/tasks"
                hx-target="#task-list"
                hx-trigger="keyup changed delay:300ms, search"
                hx-include="[name='completed']:checked, [name='sort']:checked, [name='tag_ids']:checked"
            />
        </div>
        <div class="filter-section">
            <label>Status</label>
            <div class="filter-options">
                <label class="filter-option">
                    <input 
                        type="radio" 
                        name="completed" 
                        value=""
                        checked
                        hx-get="/component/tasks"
                        hx-target="#task-list"
                        hx-trigger="change"
                        hx-include="#name-filter, [name='sort']:checked, [name='tag_ids']:checked"
                    />
                    <span>All</span>
                </label>
                <label class="filter-option">
                    <input 
                        type="radio" 
                        name="completed" 
                        value="false"
                        hx-get="/component/tasks"
                        hx-target="#task-list"
                        hx-trigger="change"
                        hx-include="#name-filter, [name='sort']:checked, [name='tag_ids']:checked"
                    />
                    <span>Open</span>
                </label>
                <label class="filter-option">
                    <input 
                        type="radio" 
                        name="completed" 
                        value="true"
                        hx-get="/component/tasks"
                        hx-target="#task-list"
                        hx-trigger="change"
                        hx-include="#name-filter, [name='sort']:checked, [name='tag_ids']:checked"
                    />
                    <span>Done</span>
                </label>
            </div>
        </div>
        <div class="filter-section">
            <button
                type="button"
                class="btn-clear-filters"
                hx-get="/component/tasks"
                hx-target="#task-list"
                hx-include="#name-filter, [name='sort']:checked, [name='tag_ids']:checked"
                _="on click
                    set #name-filter's value to ''
                    then set <input[type='radio'][name='completed'][value='']/>'s checked to true
                    then repeat for checkbox in <input[type='checkbox'][name='tag_ids']:checked/>
                        set checkbox.checked to false
                        then remove .selected from the closest .tag-checkbox to checkbox
                    end"
            >
                <i class="fas fa-times icon"></i>
                Clear Filters
            </button>
        </div>
        <div class="filter-section">
            <label>Sorting</label>
            <div class="filter-options">
                <label class="filter-option">
                    <input 
                        type="radio" 
                        name="sort" 
                        value="priority"
                        checked
                        hx-get="/component/tasks"
                        hx-target="#task-list"
                        hx-trigger="change"
                        hx-include="#name-filter, [name='completed']:checked, [name='tag_ids']:checked"
                    />
                    <span>Priority</span>
                </label>
                <label class="filter-option">
                    <input 
                        type="radio" 
                        name="sort" 
                        value="name"
                        hx-get="/component/tasks"
                        hx-target="#task-list"
                        hx-trigger="change"
                        hx-include="#name-filter, [name='completed']:checked, [name='tag_ids']:checked"
                    />
                    <span>Name</span>
                </label>
                <label class="filter-option">
                    <input 
                        type="radio" 
                        name="sort" 
                        value="date_created"
                        hx-get="/component/tasks"
                        hx-target="#task-list"
                        hx-trigger="change"
                        hx-include="#name-filter, [name='completed']:checked, [name='tag_ids']:checked"
                    />
                    <span>Date</span>
                </label>
            </div>
        </div>
        <div class="filter-section">
            <label>Filter by tags</label>
            <div id="tag-filter-container" hx-get="/component/tag-filter" hx-trigger="load" hx-target="this">
                <p class="placeholder-text">Loading tags...</p>
            </div>
        </div>
    </div>
</div>
